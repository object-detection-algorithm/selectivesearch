
# 选择性搜索-源码解析

## 工程结构

1. 头文件
      1. `include/segmentation.h`：头文件入口
      2. `include/graphsegment/`：图分割算法头文件
      3. `include/selectivesearch/`：选择性搜索算法头文件
2. 源文件：`src`文件夹
3. 测试文件：`samples/selectivesearchsegmentation_custom.cpp`

```
├── CMakeLists.txt
├── include
│   ├── graphsegment
│   │   ├── edge.h
│   │   ├── graphsegmentation.h
│   │   ├── graphsegmentationimpl.h
│   │   ├── point_set_element.h
│   │   └── point_set.h
│   ├── segmentation.h
│   └── selectivesearch
│       ├── neighbor.h
│       ├── rect_comparator.h
│       ├── region.h
│       ├── selectivesearchsegmentation.h
│       ├── selectivesearchsegmentationimpl.h
│       ├── selective_search_segmentation_strategy_color.h
│       ├── selective_search_segmentation_strategy_color_impl.h
│       ├── selective_search_segmentation_strategy_fill.h
│       ├── selective_search_segmentation_strategy_fill_impl.h
│       ├── selective_search_segmentation_strategy.h
│       ├── selective_search_segmentation_strategy_multiple.h
│       ├── selective_search_segmentation_strategy_multiple_impl.h
│       ├── selective_search_segmentation_strategy_size.h
│       ├── selective_search_segmentation_strategy_size_impl.h
│       ├── selective_search_segmentation_strategy_texture.h
│       └── selective_search_segmentation_strategy_texture_impl.h
├── samples
│   └── selectivesearchsegmentation_custom.cpp
└── src
    ├── graphsegmentation.cpp
    ├── graphsegmentationimpl.cpp
    ├── neighbor.cpp
    ├── point_set.cpp
    ├── region.cpp
    ├── selectivesearchsegmentation.cpp
    ├── selectivesearchsegmentationimpl.cpp
    ├── selective_search_segmentation_strategy_color.cpp
    ├── selective_search_segmentation_strategy_color_impl.cpp
    ├── selective_search_segmentation_strategy_fill.cpp
    ├── selective_search_segmentation_strategy_fill_impl.cpp
    ├── selective_search_segmentation_strategy_multiple.cpp
    ├── selective_search_segmentation_strategy_multiple_impl.cpp
    ├── selective_search_segmentation_strategy_size.cpp
    ├── selective_search_segmentation_strategy_size_impl.cpp
    ├── selective_search_segmentation_strategy_texture.cpp
    └── selective_search_segmentation_strategy_texture_impl.cpp
```

## 类图

分两部分实现，首先是选择性搜索算法的全局类图，其次是选择性搜索算法的相似度计算策略

![](./imgs/selectivesearch.png)

* 类`SelectiveSearchSegmentation`声明了选择性搜索算法的公共函数
* 类`SelectiveSearchSegmentationImpl`定义了选择性搜索算法的具体实现
* 类`GraphSegmentation`声明了图分割算法的公共函数
* 类`SelectiveSearchSegmentationStrategy`声明了相似度度量策略的公共函数
* 类`Region`实现了并查集，作用于区域合并
* 类`Neighbor`定义了边

![](./imgs/selectivesearchsegmentationstrategy.png)

* 类`SelectiveSearchSegmentationStrategy`声明了相似度度量策略的公共函数
* 类`SelectiveSearchSegmentationStrategyColorImpl`定义了基于颜色特征的相似性度量
* 类`SelectiveSearchSegmentationStrategyTextureImpl`定义了基于纹理特征的相似性度量
* 类`SelectiveSearchSegmentationStrategySizeImpl`定义了基于区域大小的相似性度量
* 类`SelectiveSearchSegmentationStrategySizeImpl`定义了基于区域形状的相似性度量
* 类`SelectiveSearchSegmentationStrategyMultiple`声明了组合多个相似性度量策略的公共函数
* 类`SelectiveSearchSegmentationStrategyMultipleImpl`定义了基于多特征的相似性度量计算

## 超参数

## 函数流程